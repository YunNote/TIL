# Chapter 5 - 웹 서버

---


### 다채로운 웹서버 
> `웹 서버`라는 용어는 소프트웨어와 웹페이지 제공에 특화된 장비 양쪽 모드를 가리킨다.
> 
> 웹서버는 기능, 형태, 크기가 다양하다 하지만 기능은 달라도 모든 웹서버는 리소스에 대한 HTTP요청을 받아서 콘텐츠를 클라이언트에게 돌려준다.

---

#### 🧐 웹 서버 구현 
웹 서버는 HTTP 및 그와 관련된 TCP 처리를 구현한 것이다. 

웹서버는 자신이 제공하는 리소스를 관리하고 웹서버를 설정, 통제, 확장하기 위한 관리 기능을 제공한다.

웹서버는 HTTP 프로토콜을 구현하고, 웹 리소스를 관리하고, 웹서버 관리기능을 제공하며, 커넥션 관리에 대한
책임을 운영체제와 나눠 갖는다. 

운영체제는 컴퓨터 시스템의 하드웨어를 관리하고 TCP/IP 네트워크 지원, 웹 리소스를 유지하기 위한 파일 시스템, 프로세스 관리를 제공한다.


웹서버는 여러가지 형태로 제공 가능하다.

---

#### 🧐 다목적 소프트웨어 웹 서버

다목적 소프트웨어 웹 서버는 네트워크에 연결된 표준 컴퓨터 시스템에서 동작한다.

거의 모든 컴퓨터와 운영체제에서 동작한다.

![img.png](img.png)
출처 - https://mapoman.tistory.com/entry/2022-%EC%9B%B9-%EC%84%9C%EB%B2%84-%EC%A0%90%EC%9C%A0%EC%9C%A8-%EB%B3%80%ED%99%94-web-server-market-share-of-all-sites

---

#### 🧐 임베디드 웹 서버

일반 소비자용 제품에 내장될 목적으로 만들어진 작은 웹서버이다. 보통 최소한의 기능만을 제공한다.

---

#### 🧐 진짜 웹서버가 하는일

1. 커넥션을 맺는다 -- 클라이언트의 접속을 받거나, 원치 않는 클라이언트라면 닫는다.
2. 요청을 받는다 -- HTTP 요청 메시지를 네트워크로 부터 읽어들인다.
3. 요청을 처리한다 -- 요청 메시지를 해석하고 행동을 취한다
4. 리소스에 접근한다 -- 메시지에서 지정한 리소스에 접근한다
5. 응답을 만든다 -- 올바른 헤더를 포함한 HTTP 응답 메시지를 생성한다.
6. 응답을 보낸다 -- 응답을 클라이언트에게 돌려준다
7. 트랜잭션을 로그로 남긴다 -- 로그파일에 트랜잭션 완료에 대한 기록을 남긴다.

---

#### 🧐 단계 1 - 클라이언트 커넥션 수락

클라이언트가 이미 서버에 대해 열려있는 지속적 커넥션을 가지고 있다면, 클라이언트는 요청을 보내기 위해ㅔ
그 커넥션을 사용할 수 있다. 그렇지 않다면 새 커넥션을 열필요가 있다.

클라이언트가 웹서버에 TCP 커넥션을 요청하면 커넥션필요한 정보들을 추출하여 커넥션 목록에 추가하고 오고가는 데이터를 지켜보기 위한 준비를 한다.

웹서버는 마음대로 커넥션을 거절하거나 즉시 닫을 수 있다.

어떤 서버들은 IP주소나, 호스트명이 인가되지 않았거나 악의적이라고 판단되면 커넥션을 닫는다. (다양한 구현방식이 있다.)



#### 🧐 클라이언트 호스트명 식별
