# 20장 리다이렉션과 부하 균형 

---

웹에서 HTTP는 혼자가 아니다. HTTP메시지의 데이터는 많은 프로토콜에 의해 통제된다. 
<br>
HTTP가 고려하는 것은 출발지와 목적지 뿐이지만 웹 세계에서는 단순하지는 않다.

리다이렉션 기술은 보통 메시지가 프록시, 캐시, 서버 팜의 특정 웹 서버중 어디에서 끝나는지 판단하기 위해 사용한다.

리다이렉션 기법으로는 다음과 같다

 - HTTP 리다이렉션
 - DNS 리다이렉션
 - 임의 캐스트 라우팅
 - 정책 라우팅
 - 아이피 맥 포워딩
 - 아이피 주소 포워딩
 - 웹 캐시 조직 프로토콜(WCCP)
 - 인터캐시 커뮤니케이션 프로토콜(ICP)
 - 하이퍼텍스트 캐싱 프로토콜 (HTCP)
 - 네트워크 요소 제어 프로토콜(NECP)
 - 캐시 배열 라우팅 프로토콜 (CARP)
 - 웹 프록시 자동발견 프로토콜 (WPAD)

---

## 왜 리다이렉트인가?

HTTP 애플리케이션은 `지연 최소화`, `네트워크 대역폭 절약`, `신뢰할 수 있는 HTTP 트랜잭션의 수행` 다음 세가지를 원하기 떄문에

웹 컨텐츠는 흔히 여려 장소에 배포하게 된다. 이렇게 하면 한곳에서 장애가 발생할 경우 다른 애플리케이션 서버를 이용할 수 있기 때문에
신뢰성이 개선된다.

또한 클라이언트가 보다 가까운 장소에 있는 애플리케이션 서버에 접근할 수 있기 때문에 응답시간도 줄어든다. 목적지 서버 또한 분산
되었기 때문에 네트워크 혼잡도 줄어들게 된다. 

따라서 리다이렉션이 최적의 분산된 컨텐츠를 찾는 것을 도와주는 기법의 집합이라고 볼 수 있다.

---

## 리다이렉트 할 곳

클라이언트가 HTTP 요청을 보낸다는 관점에서 바라본다면, 서버, 프락시, 캐시, 게이트웨이는 클라이언트에게 있어 모두 
서버라고 할 수 있다. 서버, 프락시, 캐시, 게이트웨이가 모두 공통적으로 서버의 특성을 갖고 있기 때문에 많은 리다이렉션 기법이 그들 모두에서 동작한다.

다만 어떤 리다이렉션 기술들은 특정 종류의 종단만을 위해 특별히 설계되어 일반적인 적용이 불가능하다.

웹서버는 IP별로 요청을 다룬다. 똑같이 복제된 서버들로 요청을 분산한다는 것은 같은 URL에 대해서 여러
곳에서 온 요청들을 각각 최적의 웹 서버로 보내겠다는 것을 의미한다.

프록시는 프로토콜별로 요청을 다룬다. 이상적으로 프록시 이웃의 모든 HTTP트래픽은 프록시를 거쳐야 한다.
프록시로의 리다이렉트는 주로 진입로의 트래픽을 근처에 있는 지름길로 빨아들이는 것과 같다.