
# 18장.  웹 호스팅

---

리소스를 공용 웹 서버에 올려놓으면 인터넷을 통해 이용할 수 있으며 리소스들은 텍스트 파일이나 이미지 같이 단순할수도, 네비게이션이나 쇼핑몰처럼 복잡할
수 있다.

콘텐츠 리소스를 저장, 중개, 관리하는 일을 통틀어서 웹 호스팅이라고 하며, 호스팅은 웹 서버의 가장 중요한 기능 중 하나이다.

해당 챕터에서는 아래와 같은 내용을 다룬다.

- 여러 웹사이트를 같은 서버에 "가상 호스팅"하는 방법. 그리고 HTTP에 끼치는영향
- 트래픽이 많은 상황에서 안정적인 사이트를 구축하는 방법
- 웹 사이트 로딩을 더 빠르게 하는 방법 

---

## 호스팅 서비스 

웹 초기에는 각 회사가 망을 구축하며 자체적으로 관리를 하였지만 
빠른 속도가 대세가 되면서 구축하고, 인력을 확보하는것보다 전문적으로 호스팅
서비스를 제공하는 여러 신사업이 만들어졌다.

---

## 가상 호스팅 

많은사람들은 웹 공간을 가지고 싶어하지만 많은 비용을 내면서 유지하는 것은 낭비이다.
따라서 많은 웹 호스팅 업체에서는 하나의 컴퓨터를 기반으로 여러 고객이 공유하게 해서 저렴한 웹 호스팅 서비스를 제공한다.

각 웹사이트들은 서로 다른 서버에서 호스팅하는것처럼 보이겠지만 물리적으로는 같은 서버에서 
호스팅되는 것이다. 

가상 호스팅은 비용, 공간, 관리에 이점이 있기때문에 가상 호스팅을 제공하는 업체는
한 서버에 수십, 수백, 수천 개의 웹사이트를 호스팅하려고 한다. 하지만 
한대의 서버에 웹사이트 천개를 구축한다는 의미는 아니다. 

---

### 호스트 정보가 없는 가상 서버 요청 

HTTP/1.0에는 가상 호스팅에 대해서 결함이 있다. HTTP/1.0은 공용 웹서버가 호스팅하고 있는 
가상 웹 사이트에 누가 접근하고 있는지 식별하는 기능을 제공하지 않는다.

HTTP/1.0 요청은 요청 메시지에 URL의 경로 컴포넌트만 전송한다.

만약 요청이 `http://sample.com/index.html`로 접근하게 된다면 브라우저는
`http://sample.com`으로 연결을 한 후 요청은 호스트 명에 대한 별다른 언급 없이
/index.html이라는 요청을 하게된다 따라서 서버가 여러개의 사이트를 호스팅 하고 있다면 해당 사용자가
어떤 가상 웹사이트로 접근하려고 하는지 정보가 충분하지 않다.

결과적으로 두 요청은 서로 다른 요청이지만 요청 자체는 똑같이 생겼다..

---

### 가상 호스팅 동작하게 하기 

호스트 정보를 HTTP 요청 명세에 넣지 않은 것은, 각 웹 서버가 정확히
웹사이트만 호스팅할 것이라고 잘못 예측한 HTTP명세의 실수다.

그래서 호스트명 정보를 보지 않고 단순하게 경로 컴포넌트만 전송하도록 설계가 된것이다.

이러한 문제를 해결하기 위해 해결을 위한 기술이 아래와 같다.

1. URL 경로를 통한 가상 호스팅 
    - URL에 특별한 경로 컴포넌트를 추가하여, 어떤 서어가 어떤 사이트를 요청하는 것인지 알 수 있게 한다.

2. 포트 번호를 통한 가상 호스팅
   - 각 사이트에 다른 포트번호를 할당하여, 분리된 우베 서버의 인스턴스가 요청을 처리 .

3. IP주소를 통한 가상 호스팅  
    - 각 가상 사이트에 별도의 IP 주소를 할당하고 모든 IP주소를 장비 하나에 연결한다.

4. Host 헤더를 통한 가상 호스팅
   - Host 요청 헤더를 통해 가상 사이트를 식별할 수 있따.