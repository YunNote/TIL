# 몽고DB 기본 

---

## 도큐먼트

몽고DB의 핵심은 정렬된 키와 연결된 값의 집합으로 이뤄진 `도큐먼트`이다.<br>
언어마다 다르지만 `도큐먼트`는 대부분 맵, 해시, 딕셔너리와 같이 도큐먼트를 자연스럽게 표현하는 자료구조를 가진다.

도큐먼트의 키는 문자열로 이루어져 있지만 다음 몇가지 예를 제외하면 어떤 UTF-8문자든 쓸 수 있다.

- 키는 \0(null 문자)를 포함하지 않는다. \0은 키의 끝을 나타내는데 사용한다.
- .과 $문자는 몇가지 특별한 속성을 가지며 특정 상황에서만 사용해야 한다. 따라서 보통 예약어로 취급된다. 부적절하게 사용하면 드라이버에서 경고를 발생한다.


몽고디비는 데이터형과 대소문자를 구분하기때문에 데이터형 또는 대소문자가 다르게 되면 서로 다른 도큐먼트로 인식한다.

---

## 컬렉션

컬렉션은 도큐먼트의 모음, 몽고DB의 도큐먼트는 DB의 행에 대응한다. 도큐먼트는 하나의 row 를 의미한다.

### 동적 스키마

컬렉션은 동적 스미카믈 갖는다. 하나의 컬렉션 내부에 서로 다른 구조의 도큐먼트를 가질 수 있다.

```json
{"name" : "yunjin"}
{"name" : "yunjin" , "age" :  30}
```

위 처럼 도큐먼트의 키, 키의 개수, 데이터형이 모두 다르더라도 같은 컬렉션에 저장할 수 있다.<br>
하지만 실제 운영시에는 서로 다른 컬렉션에 저장하기도 한다.

- 같은 컬렉션에 서로 다른 도큐먼트들을 저장하게 되면 개발자와 관리자 입장에서 번거러옴이 생긴다.
- 한 컬렉션 내에서 특정 데이터형 별로 쿼리작성하여 목록을 뽑는것보다 컬렉션별로 목록을 뽑는것이 훨씬 빠르다.
- 같은 종류의 데이터를 하나의 컬렉션에 모아두면 지역성에 좋다. 조회 탐색 시간이 빨라진다.
- 인덱스를 만드려면 도큐먼트는 특정 구조를 가져야 한다. 인덱스는 컬렉션별로 정의하게 된다. 같은 유형의 도큐먼트를 하나의 컬렉션에 넣음으로써 효율적으로 인덱싱 할 수 있다.

---

### 네이밍 

컬렉션은 이름으로 식별되고 어떠한 UTF-8 문자열이든 쓸 수 있지만 다음 몇가지 제약조건이 있다.

- 빈 문자열은 사용할 수 없다.
- \0(null)은 컬렉션의 끝을 나타내기때문에 쓸 수 없다.
- `system.` 으로 시작하는 컬렉션명은 예약어이기때문에 사용 불가능하다.
- 예약어인 `$`를 사용할 수 없다. 시스템에서 생성한 몇개의 컬렉션에서 사용하기 때문이다.