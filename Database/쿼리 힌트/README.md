## 쿼리 힌트

---
> MySQL 서버는 우리가 서비스 하는 비지니스를 100% 이해하지 못합니다.<br>
> 그래서 해당 서비스의 개발자 or DBA보다 MySQL 서버가 부족한 실행 계획을 수립할 가능성이 있다.
> 
> 이러한 경우 옵티마이저에게 쿼리의 실행 계획을 수립해야 할지 알려줄 수 있는 방법이 필요하다
> 이 방법을 `쿼리 힌트`라고 한다.


### MySQL 에서 사용 가능한 쿼리 힌트 

 - 인덱스 힌트
 - 옵티마이저 힌트 

`인덱스 힌트`들은 모두 SQL의 문법에 맞게 사용해야 하기때문에 `ANSI-SQL`표준 문법을 준수하지 못하게 되는 단점이 있다.<br>
 그와 반대로 `옵티마이저 힌트`들은 `인덱스 힌트`와는 달리 MySQL서버를 제외한 RDBMS에서는 주석으로 해석되기 때문에 `ANSI-SQL`표준을 준수한다고 볼 수 있다.

가능하다면 `인덱스 힌트`가 아닌 `옵티마이저 힌트`를 사용하는것을 추천한다고 한다.

----


### ⭐ 인덱스 힌트

#### 인덱스 힌트는 예전 버전의 MySQL 서버에서 사용되던 `USE INDEX`와 같은 힌트를 의미한다.

`STRAIGHT_JOIN` 과 `USE INDEX`등을 포함한 인덱스 힌트들은 MySQL 서버에 옵티마이저 힌트가 도입되기 전부터 사용되던 기능들입니다.

인덱스 힌트들은 모두 SQL의 문법에 맞게 사용해야 하기때문에 `ANSI-SQL`표준 문법을 준수하지 못하게 되는 단점이 있다.

또한 인덱스 힌트는 `SELECT`와 `UPDATE`명령에서만 사용 가능하다.


### ⭐ 옵티마이저 힌트

#### 옵티마이저 힌트는 MySQL 5.6버전부터 새롭게 추가되기 시작한 힌트들을 지칭하는 용어입니다.

`옵티마이저 힌트`들은 `인덱스 힌트`와는 달리 MySQL서버를 제외한 RDBMS에서는 주석으로 해석되기 때문에 `ANSI-SQL`표준을 준수한다고 볼 수 있다.

---



#### ☝ STRAIGHT_JOIN
> STRAIGHT_JOIN은 MySQL5.6 이전부터 추가되었지만 옵티마이저 힌트이기도함과 동시에 조인 키워드이기도 하다.

STRAIGHT_JOIN의 역할은 `SELECT`, `UPDATE`, `DELETE`쿼리에서 여러 개의 테이블이 조인되는 경우 조인 순서를 고정하는 역할을 한다.

```sql
EXPLAIN
SELECT *
FROM employees e, dept_emp de, departments d 
WHERE e.emp_no = de.emp_no AND d.dept_no = de.dept_no;
```
위의 쿼리를 실행시켜서 나오는 실행 계획을 확인 해본다면 밑의 사진처럼 나올것입니다.

<img src="./straight_join.PNG" alt="" width="450" />

위 쿼리의 실행계획을 확인해보면 `department as d` 테이블을 드라이빙 테이블로 선택한것을 볼수 있고,<br>
두번재로는 `dept_emp as de` 테이블을 읽은 뒤에 마디막으로 `departments as d` 테이블을 읽었음을 확인할 수 있다.



---