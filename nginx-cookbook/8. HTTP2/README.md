## HTTP/2 

> HTTP/2 는 HTTP 프로토콜의 주요 개정판입니다,<br>
> HTTP/2는 헤더압축을 통해 트래픽을 보다 효율적으로 전송하고 각 요청에 중요도를 부여할 수 있게 되었으며, 서버가 요청받지 않은 리소스들도 클라이언트로 보낼 수 있도록 
> 서버 푸시에 대한 지원이 추가되었다.

--- 

### 🌱 기본 설정

```shell
server {
  # http2 지시자를 작성해줘야 사용 가능하다.
  listen 443 ssl http2 default_server;
  ssl_certificate server.cert;
  ssl_certificate_key server.key;
  
  #...
}
```

---

### 🌱 gRPC

grpc_pass 지시자를 사용하여 엔진엑스가 사용자 요청을 gRPC로 다루도록 할 수 있다.
요청 서버 이름 앞에 grpc://문자열을 작성하지 않아도 무방하지만 , 서버와의 통신이
암호화되지 않았음을 직접적으로 나타내게 된다.

엔진엑스가 애플리케이션 서버로 향하는 gRPC 통신에 종단간 트래픽 암호화를 제공하도록 하려면 
grpc_pass 지시자가 grpcs://르 ㄹ사용하도록 수정하면 된다.
https처럼 보안통신을 나타내는 s 를 추가했다는 점이 있다.

---

### 🌱 HTTP/2 서버 푸시

클라이언트에게 콘텐츠를 즉시 전송하기 위해서는 엔진엑스의 HTTP/2 서버 푸시 기능을 사용한다.

HTTP/2 서버 푸시를 사용하기 위해서는 http2_push 지시자를 사용할 수 있으며 다음과 같이 설정하면된다.

좀더 상세하게 설명하자면, 클라이언트가 해당 리소스에 대해서 요청하지 않아도 서버가 미리 해당 리소스를 보내주는 기능이다.<br>
클라이언트 입장에서는 리소스를 요청하기전에 미리 서버에서 받아놓았기때문에 페이지 로딩속도가 빨라진다.

```shell
server {
 
 #...  생략
 # HTTP/2 서버 푸시는 보안때문에 HTTPS 프로토콜에서만 사용 가능. 
 location = /demo.html {
   http2_push /style.css;
   http2_push /image.jpg;
 } 
}
```

주의해야할 점은 HTTP/2 서버 푸시를 사용하면 미리 보내놓기 때문에 로딩속도르 ㄹ향상시킬 수 있고, 사용자 경험을
개선할 수 있지만, 적절한 전략이 없이 불필요한 리소스를 PUSH 하게 되면 오히려 로딩 속도를 늦출 수 있다.


