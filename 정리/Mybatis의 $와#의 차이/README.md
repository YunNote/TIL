## Mybatis의 `${}`와 `#{}`의 차이

---

아는 지인과 함께 이직준비를 할 당시 면접때 나왔던 내용을 정리하고자 이렇게 글을 남기게 되었습니다.

지인이 면접을 보았던 한 회사에서 다음과 같은 질문이 나왔다고 합니다.

> 🧑 면접관 : Mybatis에서의 ${}와 #{}의 차이를 알고있나요 ?
> 
> 😣 지인 : ... (대략 아는내용에 대해서만 설명하였다고 한다.)

`${}`와 `#{}`은 문법이 다르지 않나? 라고 장넌처럼 생각할 수 있으나. 정확히 집고 넘어가면 좋을듯하다.


---

### 😊 #{}를 사용할 경우

`#{}`를 사용하여 Mybatis 의 Query문을 생성할 경우 `#{}`이 사용된 쿼리문에 `?`가 생기며 파싱된다.

즉 `?`를 사용하면 `PreparedStatement` 를 생성하여 `?`에 파라미터가 바인딩된다.


 - `#{}`을 사용하여 sql문을 작성할 경우 해당 파싱된 쿼리문은 캐싱되어 효율적으로 사용 가능하다.
 - `#{}`을 사용하면 자동으로 작은따옴표(')가 붙기 때문에 문자열과 같은 곳에 작은따옴표를 적지 않아도 된다. 하지만 이러한 특성때문에 테이블 명이나, 컬럼이름을 동적으로 작성하기에는 알맞지 않다.

---
### 😊 ${}를 사용할 경우 

`${}`를 사용하여 Query를 생성할 경우 값이 넣어진 채로 쿼리문이 생성된다. 그러한 이유로 파라미터의 값이 변경될때마다
쿼리문 파싱을 진행해야 하므로 성능상의 단점이 존재.

파라미터 값이 넣어진 채로 Query문이 생성되어 파싱되기 때문에 `SQL Injection`에 취약한점 이 있다. 

하지만 `${}`는 `#{}`와 다르게 작은 따옴표가 따로 붙지 않기때문에 동적 테이블 이름이다, 동적 컬럼 이름등 동적으로 결정할 때 사용할 수 있다.
